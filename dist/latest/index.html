<!DOCTYPE html>
<html>
	<head>
		<title>Bootstrap AutoComplete Demo</title>

		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<link href="//netdna.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet">
	</head>
	<body>
		<div class="container">
			<h1 class="page-header">Bootstrap Autocomplete</h1>
			<p>
				Demo
			</p>
			<form class="form-horizontal">
				<fieldset>
					<legend>AJAX</legend>
					<div class="form-group">
						<label class="col-lg-3 control-label">
							Basic (<a href="testdata/test-list.json">list of strings</a>)
						</label>
						<div class="col-lg-9">
							<input class="form-control basicAutoComplete" type="text" autocomplete="off">
						</div>
					</div>
					<div class="form-group">
						<label class="col-lg-3 control-label">
							Advanced (<a href="testdata/test-dict.json">complex object</a>)
						</label>
						<div class="col-lg-9">
							<input class="form-control advancedAutoComplete" type="text" autocomplete="off">
						</div>
					</div>
					<div class="form-group">
						<label class="col-lg-3 control-label">
							Advanced (<a href="testdata/test-dict.json">complex object</a> - custom formatting)
						</label>
						<div class="col-lg-9">
							<input class="form-control advanced2AutoComplete" type="text" autocomplete="off">
						</div>
					</div>
				</fieldset>
			</form>
		</div>

		<script src="//ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
		<script src="//netdna.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
		<script src="bootstrap-autocomplete.js"></script>
		<script>
			$(function () {
				// Basic
				$('.basicAutoComplete').autoComplete({
					resolver: 'ajax',
					resolverSettings: {
						url: 'testdata/test-list.json'
					}
				});

				// Advanced 1
				$('.advancedAutoComplete').autoComplete({
					resolver: 'custom',
					events: {
						search: function (qry, callback) {
							console.log('search');
							// let's do a custom ajax call
							$.ajax(
								'testdata/test-dict.json',
								{
									data: { 'qry': qry}
								}
							).done(function (res) {
								callback(res.results)
							});
						}
					}
				});

				// Advanced 2
				$('.advanced2AutoComplete').autoComplete({
					resolver: 'custom',
					formatResult: function (item) {
						return {
							value: item.id,
							text: "[" + item.id + "] " + item.text,
							html: [ 
									$('<img>').attr('src', item.icon).css("height", 18), ' ',
									item.text 
								] 
						};
					},
					events: {
						search: function (qry, callback) {
							// let's do a custom ajax call
							$.ajax(
								'testdata/test-dict.json',
								{
									data: { 'qry': qry}
								}
							).done(function (res) {
								callback(res.results)
							});
						}
					}
				});
			});
		</script>
	</body>
</html>